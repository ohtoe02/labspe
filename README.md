# Отчет по оптимизации и повышению безопасности цепочки CI/CD
## Студент: ВяткинСЮ

### Описание проекта
Простое Python приложение для исследования влияния оптимизаций CI/CD:
- **main.py** - базовое приложение (умножение числа на 6)
- **test_main.py** - модульные тесты (pytest)
- **requirements.txt** - зависимости проекта (pylint, bandit, pytest и др.)

### Архитектура исследования
Реализованы **3 пайплайна** для сравнения производительности:
1. **basic-pipeline** - базовый без оптимизаций
2. **cached-pipeline** - с кэшированием pip зависимостей  
3. **full-pipeline** - кэш + SonarQube + проверки безопасности

## Результаты исследования

### 1. Реализация простого пайплайна, время этапов
**Job: basic-pipeline**
| Запуск | 1 | 2 | 3 | Среднее |
|--------|---|---|---|---------|
| Время  |45с|39с|39с|**41.0с**|

**Структура времени:**
- Обязательные этапы (setup, checkout): **1-4с**
- Установка зависимостей: **36.3с** (основные затраты)
- Pylint + тесты: **1-2с**

### 2. Реализация кэширования, влияние на время сборки  
**Job: cached-pipeline**
| Запуск | 1 | 2 | 3 | Среднее |
|--------|---|---|---|---------|
| Время  |41с|43с|40с|**41.3с**|

**Анализ кэширования:**
- Накладные расходы кэша: **+5-6с** (actions/cache@v4)
- Установка зависимостей: **31.6с** (экономия 4.7с)
- **Итоговый результат: +0.3с** (кэш не дал ускорения)

### 3. Реализация автотестов
Во всех пайплайнах используются pytest тесты:
- test_ast_literal_eval() - безопасный парсинг
- test_multiplication() - математическая логика  
- test_main_flow() - тестирование с моками
- **Время выполнения: стабильно <1с**

### 4. Реализация проверки безопасности, влияние на время сборки
**Job: full-pipeline**
| Компонент | 1 | 2 | 3 | Среднее |
|-----------|---|---|---|---------|
| FULL      |54с|48с|47с|**49.6с**|
| BUILD     |49с|42с|42с|**44.3с**|
| SONAR     |38с|33с|33с|**34.6с**|

**Добавленные проверки безопасности:**
- Pylint (статический анализ): **1с**
- Bandit (безопасность Python): **<1с** 
- SonarCloud (качество кода): **34-39с**
- **Общие затраты на безопасность: +8.6с**

## 5. Подведение итогов

### Сравнительная таблица
| Пайплайн | Среднее время | Изменение | Особенности |
|----------|---------------|-----------|-------------|
| Basic    | **41.0с**     | Базовая линия | Без оптимизаций |
| Cache    | **41.3с**     | **+0.3с** | Кэш не эффективен |
| Full     | **49.6с**     | **+8.6с** | Безопасность + качество |

### Ключевые выводы

1. **Кэширование неэффективно** для малых проектов
   - Накладные расходы кэша превышают экономию
   - Для крупных проектов эффект может быть значимым

2. **Проверки безопасности обоснованы**
   - SonarCloud: основные затраты времени (+34-39с)
   - Повышение качества кода критически важно
   - Принимаем обязательным несмотря на +20% времени

3. **Автотесты эффективны**
   - Минимальное влияние на время (<1с)
   - Высокая ценность для качества кода

### Рекомендации
- **Кэширование**: требует дополнительных исследований на больших проектах
- **SonarQube**: использовать селективно (main ветка, перед релизом)
- **Базовые проверки**: Pylint + Bandit оптимальны по времени/качеству
- **Мониторинг**: отслеживать деградацию производительности пайплайна

**Экономический эффект:** раннее обнаружение проблем качества превышает +8.6с затрат времени.  